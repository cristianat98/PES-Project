<!DOCTYPE html>
<html lang="en">
<style>

    img{
        width: 100px;
        height: 100px;
    }

    .dropdown > li{
        left: 1050px;
    }

    .column li a{
        background-color: #000000;
        color:#ffffff;
        padding:10px 15px;
        display:block;
        width: 370px;
    }

    .barra > li{
        float:left;
    }

    .btn btn-default btn-lg{
        position: relative;
        left: 1200px;
        width: 150px;
        height: 150px;
    }

    .left {
        padding-left: 10px;
        padding-top: 10px;
        margin-left: 57px;
        float: left;
        position: relative;
        width: auto;
        height: auto;
    }

    .right {
        padding-top: 10px;
        padding-left: 10px;
        margin-left: 10px;
        position: relative;
        float: left;
        width: 45%;
        height: auto;
    }

    .avatar{
        width: 75px;
        height: 75px;
        border-radius: 50%;
        margin-left: 1400px;
    }

    .avatar1{
        width: 75px;
        height: 75px;
        border-radius: 50%;
    }

    .usuario {
        width: auto;
        height: auto;
        margin-left: 1300px;
    }

    .prueba{
        float:right;
    }

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script>
    window.onload=function() {

        if (&{visionadmin} === 1)
        document.getElementById('AñadirUsuario').style.display="block";

        else if (&{visionadmin} === 2)
        document.getElementById('ModificarUsuario').style.display="block";

        else if (&{visionadmin} === 3)
            document.getElementById('VerUsuario').style.display="block";

    	else if (&{visionadmin} === 4)
            document.getElementById('EliminarUsuario').style.display="block";

    	else if (&{visionadmin} === 5)
            document.getElementById('AñadirStock').style.display="block";

    	else if (&{visionadmin} === 6)
    	    document.getElementById('QuitarStock').style.display="block";

        else if (&{visionadmin} === 7)
            document.getElementById('AñadirPrenda').style.display="block";

        else if (&{visionadmin} === 8)
            document.getElementById('ModificarPrenda').style.display="block";
    	}

    	function ComprobarCheckAñadir (){
            if (document.getElementById('crearusuarioadmin').checked)
                document.getElementById('crearusuarioadmin').value = 1;
        }

        function ComprobarCheckModificar (){
        if (document.getElementById('modificarusuarioadmin').checked)
            document.getElementById('modificarusuarioadmin').value = 1;
        }

</script>

<head>
    <meta charset="UTF-8">
    <title>Página Administrador</title>
</head>
<body>
<div style="background: linear-gradient(#58e51b,#e9ece7); width:auto; height:90px"></div>

<h1 style="text-align: center; width:auto;"> VISTA ADMINISTRADOR</h1>
<div class="prueba">
<img class="avatar" src="@{MostrarPerfil(1)}" alt="ERROR AL CARGAR LA IMAGEN">
<div class ="usuario"> <b>Está conectado como: &{client.usuario}</b></div>
    <div class="cart pull-right">
        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                Opciones Usuario
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                <li><a href="@{CambiarVistaNormal()}">Cambiar Vista a Normal</a></li>
                <li><a href="@{EliminarUsuario()}">Borrar perfil</a></li>
                <li><a href="@{ModificarUsuario()}">Modificar datos perfil</a></li>
                <li><a href="@{Logout()}">Cerrar Sesión</a></li>
            </ul>
        </div>
    </div>
    <p style="text-align: center">Esta es la vista de Administrador de la Página Web. Solos los usuarios con derechos de administrador pueden acceder a esta página.</p>
    <h3 style="text-align: center; width:auto;"> ACCIONES DE ADMINISTRADOR</h3>
</div>

<div class="left" style="width: auto">
    <ul class="column">
        <h2>PARA USUARIO</h2>
        <a class="jumbotron"></a>
        <li><a href="@{añadirusuario()}">Añadir Usuario</a></li>
        <li><a href="@{modificarusuarioadmin()}">Modificar Usuario</a></li>
        <li><a href="@{verusuario()}">Ver Usuario</a></li>
        <li><a href="@{cargareliminar()}">Eliminar Usuario</a></li>
        <h2>PARA PRENDAS</h2>
        <li><a href="@{añadirprenda()}">Añadir Prenda</a></li>
        <li><a href="@{modificarprenda()}">Modificar Prenda</a></li>
        <li><a href="@{goAddStock()}">Añadir Stock</a></li>
        <li><a href="@{cargarquitarstock()}">Quitar Stock</a></li>
    </ul>
</div>

<div class="right">

<div style="text-align: center; display: none" id ="AñadirUsuario">

#{form @registrarclienteadmin(), enctype:'multipart/form-data'}
    <h3>Introduce los datos del nuevo usuario:</h3>
    #{field 'usuario'}
        <p class="${field.errorClass}">
            <strong>Username:</strong> <input type="text" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>

    #{/field}

    #{field 'nombre'}
        <p class="${field.errorClass}">
            <strong>Nombre:</strong> <input type="text" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    #{field 'apellido1'}
        <p class="${field.errorClass}">
            <strong>Apellido 1:</strong> <input type="text" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>

    #{/field}

    #{field 'nuevocliente.apellido2'}
        <p class="${field.errorClass}">
            <strong>Apellido 2:</strong> <input type="text" name="${field.name}" size="16">
            <span class="error">${field.error}</span>
        </p>

    #{/field}

    #{field 'nuevocliente.contraseña'}
        <p class="${field.errorClass}">
            <strong>Contraseña:</strong> <input type="password" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>

    #{/field}
    #{field 'contraseña'}
        <p class="${field.errorClass}">
            <strong>Verificar Contraseña:</strong> <input type="password" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>

        </p>

    #{/field}
    #{field 'mail'}
        <p class="${field.errorClass}">
            <strong>Mail:</strong> <input type="email" name="${field.name}" size="16"> *
            <span class="error">${field.error}</span>
        </p>

    #{/field}

    #{field 'admin'}
        <p class="${field.errorClass}">
            <strong>Usuario Admin:</strong><input type="checkbox" id ="crearusuarioadmin"name="${field.name}" value="0">
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    #{field 'nuevocliente.perfil'}
        <p class="${field.errorClass}">
            <strong>Foto Perfil:</strong><input type="file" name="${field.name}">
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    <p class="buttons">
        <input type="submit" value="Register" onclick="ComprobarCheckAñadir();">
    </p>

#{/form}

#{if mensaje}
    <p style="color: #08ea0c">${mensaje}</p>
#{/if}

#{if error}
    <p style="color: #ea0808">${error}</p>
#{/if}
</div>

<div  style="text-align: center; display: none" id = "ModificarUsuario" class="column">
#{form @cargardatos()}
    <p>
        <strong>Selecciona el usuario que quieres modificar:</strong>
    </p>

    <p>
        <label for="NombreusuariosM"> Usuarios:</label>
        <select id="NombreusuariosM" name="idusuario">
            #{list items:listaclientes, as:'cliente'}
                <option value="${cliente.id}" >${cliente.usuario}</option>
            #{/list}
        </select>
    </p>

    <p class="buttons">
        <input type="submit" value="Cargar Datos" />
    </p>
#{/form}

#{if usuarioM}
#{form @ModificarU(), enctype:'multipart/form-data'}


    <h3>Modifica los datos del usuario ${usuarioM.usuario}:</h3>

    #{field 'usuarioinicial'}
        <p class="${field.errorClass}">
            <input style="display: none" name="${field.name}" value="${usuarioM.usuario}" size="16"  >
            <span class="error">${field.error}</span>
        </p>
    #{/field}

        #{field 'usuariofinal'}
            <p class="${field.errorClass}">
                <strong>Usuario:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.usuario}" size="16"  >
                <span class="error">${field.error}</span>
            </p>
        #{/field}

    #{field 'usuarioM.nombre'}
        <p class="${field.errorClass}">
            <strong>Nombre:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.nombre}" size="16">
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    #{field 'usuarioM.apellido1'}
        <p class="${field.errorClass}">
            <strong>Apellido 1:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.apellido1}"size="16">
            <span class="error">${field.error}</span>
        </p>

    #{/field}

    #{field 'usuarioM.apellido2'}
        <p class="${field.errorClass}">
            <strong>Apellido 2:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.apellido2}" size="16">
            <span class="error">${field.error}</span>
        </p>

    #{/field}

        #{field 'usuarioM.contraseña'}
            <p class="${field.errorClass}">
                <strong>Contraseña:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.contraseña}"size="16" >
                <span class="error">${field.error}</span>
            </p>
        #{/field}

    #{field 'contraseña'}
        <p class="${field.errorClass}">
            <strong>Verificar Contraseña:</strong> <input type="text" name="${field.name}" placeholder="${usuarioM.contraseña}"size="16" >
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    #{field 'mailinicial'}
        <p class="${field.errorClass}">
            <input style="display: none" name="${field.name}" value="${usuarioM.mail}" size="16"  >
            <span class="error">${field.error}</span>
        </p>
    #{/field}

        #{field 'mailfinal'}
            <p class="${field.errorClass}">
                <strong>Mail:</strong> <input type="email" name="${field.name}" placeholder="${usuarioM.mail}" size="16" >
                <span class="error">${field.error}</span>
            </p>
        #{/field}

#{if admin}
    #{field 'admin'}
        <p class="${field.errorClass}">
            <strong>Hacer Admin:</strong><input type="checkbox" id ="modificarusuarioadmin"name="${field.name}" value="0">
            <span class="error">${field.error}</span>
        </p>
    #{/field}
#{/if}

    #{field 'usuarioM.perfil'}
        <p class="${field.errorClass}">
            <strong>Foto Perfil:</strong><input type="file" name="${field.name}">
            <span class="error">${field.error}</span>
        </p>
    #{/field}

        <p class="buttons">
            <input type="submit" onclick="ComprobarCheckModificar();" value="Modificar Usuario" />
        </p>
#{/form}
#{/if}

#{if mensaje}
    <p style="color: #08ea0c">${mensaje}</p>
#{/if}

#{if error}
    <p style="color: #ea0808">${error}</p>
#{/if}
</div>

<div style="text-align: center; display: none" id = "VerUsuario" class="column">
#{form @cargardatos()}
    <p>
        <strong>Selecciona el usuario que quieres ver:</strong>
    </p>

    <p>
        <label for="NombreusuariosM"> Usuarios:</label>
        <select id="NombreusuariosM" name="idusuario">
            #{list items:listaclientes, as:'cliente'}
                <option value="${cliente.id}" >${cliente.usuario}</option>
            #{/list}
        </select>
    </p>

    <p class="buttons">
        <input type="submit" value="Cargar Datos" />
    </p>
#{/form}

#{if usuarioM}

    <h3>Estos son los datos del usuario ${usuarioM.usuario}:</h3>

    <p>- Nombre de Usuario: ${usuarioM.usuario}</p>
    <p>- NOMBRE DE LA CUENTA: ${usuarioM.nombre}</p>
    <p>- PRIMER APELLIDO: ${usuarioM.apellido1}</p>
    <p>- SEGUNDO APELLIDO: ${usuarioM.apellido2}</p>
    <p>- CONTRASEÑA: ${usuarioM.contraseña}</p>
    <p>- MAIL: ${usuarioM.mail}</p>
    <p>- Si hay un 0, quiere decir que no es Admin, si hay un 1 quiere decir que sí es admin
    <p>- USUARIO ADMIN: ${usuarioM.admin}</p>
    <p>- FOTO DE PERFIL: <img class="avatar1" src="@{MostrarPerfil(0)}" alt="ERROR AL CARGAR LA IMAGEN">

#{/if}

</div>

<div style="text-align: center; display: none" id = "EliminarUsuario" class="column">

#{form @eliminarusuarioadmin()}
    <p>
        <strong>Selecciona el usuario que quieres eliminar:</strong>
    </p>

    <p>
        <label for="NombreusuariosE"> Usuarios:</label>
        <select id="NombreusuariosE" name="idusuario">
            #{list items:listaclientes, as:'cliente'}
                <option value="${cliente.id}" >${cliente.usuario}</option>
            #{/list}
        </select>
    </p>

    <p class="buttons">
        <input type="submit" value="Eliminar Usuario" />
    </p>
#{/form}

#{if mensaje}
    <p style="color: #08ea0c">${mensaje}</p>
#{/if}

#{if error}
    <p style="color: #ea0808">${error}</p>
#{/if}

</div>

<div style="text-align: center; display: none" id = "AñadirPrenda" class="column">
        <h3>Introduce los datos del nuevo equipo:</h3>

    #{form @añadirprendaadmin(), enctype:'multipart/form-data'}
        #{field 'tipo'}
            <p class="${field.errorClass}">
                <label for="TiposPrenda"> Tipo de Prenda:</label>
                <select id="TiposPrenda" name="tipo">
                    <option value="CAMISETA" >Camiseta</option>
                    <option value="PANTALON" >Pantalón</option>
                </select>*
            </p>
        #{/field}

        #{field 'equipo'}
            <p class="${field.errorClass}">
                <strong>Equipo:</strong> <input type="text" name="${field.name}" size="16" > *
                <span class="error">${field.error}</span>
            </p>
        #{/field}

        #{field 'precio'}
            <p class="${field.errorClass}">
                <strong>Precio:</strong> <input type="number" step="0.01" name="${field.name}" size="16" > *
                <span class="error">${field.error}</span>
            </p>
        #{/field}

        #{field 'año'}
            <p class="${field.errorClass}">
                <strong>Año:</strong> <input type="number" name="${field.name}" size="16" > *
                <span class="error">${field.error}</span>
            </p>
        #{/field}

        #{field 'imagen'}
            <p class="${field.errorClass}">
                <input type="file" name="${field.name}"> *
                <span class="error">${field.error}</span>
            </p>
        #{/field}

        <p class="buttons">
            <input type="submit" value="Añadir Prenda"/>
        </p>
    #{/form}
</div>

<div style="text-align: center; display: none" id = "ModificarPrenda" class="column">

#{form @cargardatosprenda()}
    <p>
        <strong>Selecciona la prenda que quieres modificar:</strong>
    </p>

    <p>
        <label for="Equipo"> Equipos:</label>
        <select id="idprenda" name="idprenda">
            #{list items:prendas, as:'prenda'}
                <option value="${prenda.id}" >${prenda.equipo} ${prenda.año} ${prenda.tipo}</option>
            #{/list}
        </select>*
    </p>

    <p class="buttons">
        <input type="submit" value="Cargar Datos" />
    </p>
#{/form}
    #{if prendaModificar}

        #{form @modificarprendaadmin(), enctype:'multipart/form-data'}
            #{field 'tipo'}
                <p class="${field.errorClass}">
                    <label for="TiposPrenda"> Tipo de Prenda (Prenda actual: &{prendaModificar.tipo}:</label>
                    <select id="TiposPrenda" name="tipo">
                        <option value="CAMISETA" >Camiseta</option>
                        <option value="PANTALON" >Pantalón</option>
                    </select>
                </p>
            #{/field}

            #{field 'equipo'}
                <p class="${field.errorClass}">
                    <strong>Equipo:</strong> <input type="text" name="${field.name}" placeholder="&{prendaModificar.equipo}" size="16" >
                    <span class="error">${field.error}</span>
                </p>
            #{/field}

            #{field 'precio'}
                <p class="${field.errorClass}">
                    <strong>Precio:</strong> <input type="number" step="0.01" name="${field.name}" placeholder="&{prendaModificar.precio}" size="16" >
                    <span class="error">${field.error}</span>
                </p>
            #{/field}

            #{field 'año'}
                <p class="${field.errorClass}">
                    <strong>Año:</strong> <input type="number" name="${field.name}" placeholder="&{prendaModificar.año}" size="16" >
                    <span class="error">${field.error}</span>
                </p>
            #{/field}

            #{field 'imagen'}
                <p class="${field.errorClass}">
                    <input type="file" name="${field.name}">
                    <span class="error">${field.error}</span>
                </p>
            #{/field}

            <p class="buttons">
                <input type="submit" value="Modificar Prenda"/>
            </p>
        #{/form}
    #{/if}
</div>

<div style="text-align: center; display: none" id = "AñadirStock" class="column">
    <h3>Introduce los datos de la prenda:</h3>
    
#{form @AddStock()}

        <p>
            <label for="Equipo"> Equipos:</label>
            <select id="idprenda" name="idprenda">
                #{list items:prendas, as:'prenda'}
                    <option value="${prenda.id}" >${prenda.equipo} ${prenda.año} ${prenda.tipo}</option>
                #{/list}
            </select>*
        </p>

    #{field 'prendaM.talla'}
        <p class="${field.errorClass}">
            <strong>Talla:</strong> <input type="text" name="${field.name}" size="16" > *
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    #{field 'prendaM.cantidadStock'}
        <p class="${field.errorClass}">
            <strong>Cantidad:</strong> <input type="int" name="${field.name}" size="16" > *
            <span class="error">${field.error}</span>
        </p>
    #{/field}

    <p class="buttons">
        <input type="submit" value="Añadir Stock"/>
    </p>
#{/form}

#{if mensaje}
    <p style="color: #08ea0c">${mensaje}</p>
#{/if}

</div>

<div style="text-align: center; display: none" id = "QuitarStock" class="column">
#{form @cargarequipo()}
    <p>
        <strong>Selecciona el equipo que quieres modificar:</strong>
    </p>

    <p>
        <label for="NombrePrenda"> Equipos:</label>
        <select id="idprenda" name="idprenda">
            #{list items:listaprendas, as:'prenda'}
                <option value="${prenda.id}" >${prenda.equipo} ${prenda.año} ${prenda.tipo} ${prenda.talla}</option>
            #{/list}
        </select>
    </p>

    <p class="buttons">
        <input type="submit" value="Cargar Prenda" />
    </p>
#{/form}

#{if quitarprenda}
    <h4>CANTIDAD DISPONIBLE: &{quitarprenda.cantidadStock}</h4>
    #{form @quitarStock()}

        #{field 'cantidad'}
            <p class="${field.errorClass}">
                <strong>Cantidad a Retirar:</strong> <input type="number" name="${field.name}" size="16" > *
                <span class="error">${field.error}</span>
            </p>
        #{/field}

            <p class="${field.errorClass}">
                <input type="submit" value="Quitar Stock"/>
            </p>


    #{/form}

    #{if mensaje}
        <p style="color: #08ea0c">${mensaje}</p>
    #{/if}

    #{if error}
        <p style="color: #ea0808">${error}</p>
    #{/if}
#{/if}
</div>
</div>
</body>
</html>